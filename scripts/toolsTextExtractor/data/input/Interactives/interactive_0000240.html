<html>
    <head>
	 <link href="calci_std.css" rel="stylesheet" type="text/css"/>
        <meta name="viewport" content="width=device-width">
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <meta content='width=device-width; initial-scale=1.0; maximum-scale=1.5; user-scalable=0;' name='viewport' />
                <script src="jquery-1.9.1.min.js"></script>
                <script src="jquery-algoPlugin.js"></script>
                <script src="algoFunctions.js"></script>
         <link rel="stylesheet" type="text/css" href="pop-example.css">
       
             <script type="text/JavaScript">
		function changeCSS(cssFile, cssLinkIndex) {
 
        var oldlink = document.getElementsByTagName("link").item(cssLinkIndex);
 
        var newlink = document.createElement("link");
        newlink.setAttribute("rel", "stylesheet");
        newlink.setAttribute("type", "text/css");
        newlink.setAttribute("href", cssFile);
 
        document.getElementsByTagName("head").item(0).replaceChild(newlink, oldlink);
      }
		              //Below function is used for generating POP-UP
 function showModal(message) {
     // get the modal
     var modal = document.getElementById("modal");
     modal.style.display = "block";

     document.getElementById("text").innerHTML = message;

     var modalButton = document.getElementById("modalButton");
     modalButton.onclick = function() {
         modal.style.display = "none";
     }

     window.onclick = function(event) {
         if (event.target === modal) {
             modal.style.display = "none";
         }
     }
 } 
            </script>

            <script type="text/javascript">
                var ty=0;
                $(function(){
                  $('input').on('keyup', function(e){
                                
                                if (e.keyCode == 188)  {
                                
                              document.frm.result_text.value="";
                                document.frm.egfr1.value="";
                                     document.frm.egfr2.value="";
                                document.frm.result.value="";
                                document.getElementById("errmgs").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sorry, please use a period instead <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of a comma as a decimal point.";
                                document.getElementById("errmgs1").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sorry, please use a period instead <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of a comma as a decimal point.";
                                
                                this.value="";
                                
                                this.blur();
                                showModal("Sorry, please use a period instead of a comma as a decimal point.");
                                } }); });
                
             /*   function alertshow(mgs)
                {
                    var iframe = document.createElement("IFRAME");
                    iframe.setAttribute("src", 'data:text/plain,');
                    document.documentElement.appendChild(iframe);
                    window.frames[0].window.alert(mgs);
                    iframe.parentNode.removeChild(iframe);
                }*/

                  var gh=0;
                function valchange()
                {
                    var mu;
                    var serum = parseFloat(document.frm.serum.value);
                    var drop=document.getElementById("drop").value;
                    
                    if(drop==1)
                    {
                         mu=serum*88.4;
                        document.frm.serum.value= Math.round(mu *100) /100;    
                    }
                    
                    
                }
                var ght ;
                
                
                function check()
                {
                    var drop=document.getElementById("drop").value;
                    var serum = parseFloat(document.frm.serum.value);
                    var serumlength=(document.frm.serum.value).length;
                    
                    var age = parseFloat(document.frm.age.value);
                    var weight = parseFloat(document.frm.weight.value);
                    
                    
                    if(drop==1)
                    {
                        if(serumlength >3)
                        {
                            if(serum<0.45)
                            {
                                gh=1;
                                showModal("Sorry! Not a valid range");
                                document.frm.serum.value="";
                                document.frm.result_text.value="";
                                document.frm.egfr1.value="";
                                document.frm.egfr2.value="";
								document.frm.result.value="";
                                deactiveResultStyle();
                                document.frm.serum.blur();
                            }
                            
                        }
                        if(serum>7)
                        {
                            document.getElementById('serum').focus();
                            if (window.orientation ==0 || window.orientation ==180)
                            {
                                document.frm.result_text.value="";
                                document.frm.egfr1.value="";
                                document.frm.egfr2.value="";
                                document.frm.result.value="";
                                deactiveResultStyle();
                                document.frm.weight.blur();
                                showModal("Sorry! Not a valid range");
                            }
                            else
                            {
                                document.frm.result_text.value="";
                                document.frm.egfr1.value="";
                                document.frm.egfr2.value="";
                                document.frm.result.value="";
                                deactiveResultStyle();
                                document.frm.weight.blur();
                                showModal("Sorry! Not a valid range");
                            }
                            document.getElementById('serum').blur();
                            document.frm.serum.value="";
                        }
                        
                    }
                    if(drop==2)
                    {
                        
                        if(serumlength >1)
                        {
                            
                            
                        }
                    	if(serumlength>=2)
                    	{
                            
                            if(serum>620)
                            {
                                document.frm.serum.value="";
                                document.getElementById('serum').focus();
                                if (window.orientation ==0 || window.orientation ==180)
                                { 
                                    document.frm.result_text.value="";
                                    document.frm.egfr1.value="";
                                    document.frm.egfr2.value="";
                                    document.frm.result.value="";
                                deactiveResultStyle();
                                    document.frm.weight.blur();
                                    showModal("Sorry! Not a valid range");
                                }
                                else
                                {
                                    document.frm.result_text.value="";
                                    document.frm.egfr1.value="";
                                    document.frm.egfr2.value="";
                                    document.frm.result.value="";
                                deactiveResultStyle();
                                    document.frm.weight.blur();
                                    showModal("Sorry! Not a valid range");
                                }
                                document.getElementById('serum').blur();
                            }
                        }
                        serum=(serum*0.0113636);
                        
                    }
                    
                    if((age<1)||(age>120))
                    {
                        document.frm.age.value="";
                        document.getElementById('age').focus();
                        //alert("Sorry! Not a valid range");
                        if (window.orientation ==0 || window.orientation ==180)
                        {
                            
                            document.frm.result_text.value="";
                            document.frm.egfr1.value="";
                            document.frm.egfr2.value="";
                            document.frm.result.value="";
                                deactiveResultStyle();
                            document.frm.weight.blur();
                            showModal("Sorry! Not a valid range");
                           
                        }
                        else
                        {
                            
                            document.frm.result_text.value="";
                            document.frm.egfr1.value="";
                            document.frm.egfr2.value="";
                            document.frm.result.value="";
                                deactiveResultStyle();
                            document.frm.weight.blur();
                            showModal("Sorry! Not a valid range");
                            //document.getElementById("errmgs1").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sorry! Not a valid range";
                        }
                        document.getElementById('age').blur();
                    	
                    }
                    
                    if((weight<1)||(weight>800))
                    {
                        document.frm.weight.value="";
                        document.getElementById('weight').focus();
                        //alert("Sorry! Not a valid range");
                        if (window.orientation ==0 || window.orientation ==180)
                        {
                            document.frm.result_text.value="";
                            document.frm.egfr1.value="";
                            document.frm.egfr2.value="";
                            document.frm.result.value="";
                                deactiveResultStyle();
                            
                            document.frm.weight.blur();
                            showModal("Sorry! Not a valid range");
                            //document.getElementById("errmgs").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sorry! Not a valid range";
                        }
                        else
                        {
                            document.frm.result_text.value="";
                            document.frm.egfr1.value="";
                            document.frm.egfr2.value="";
                            
                            showModal("Sorry! Not a valid range");
                            document.frm.result.value="";
                                deactiveResultStyle();
                            //document.getElementById("errmgs1").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sorry! Not a valid range";
                            document.frm.weight.blur();
                            showModal("Sorry! Not a valid range");
                        }
                        document.getElementById('weight').blur();
                        
                    }
                    
                 
                    
                    var serumlength=(document.frm.serum.value).length;
                    ;
                    var arr=document.frm.serum.value.split(".");
                    if(arr[1].length>2)
                    {
                        document.frm.serum.value=ght;
                    }
                    else
                    {
                        ght= parseFloat(document.frm.serum.value);
                    }
                    
                    
                }
                function checks()
                {
                     var drop=parseInt(document.getElementById("drop").value);
                    var serum = parseFloat(document.frm.serum.value);
                    if(gh==0)
                    {
                    if(drop==1)
                    {
                    if(serum <0.45)
                    {
                        
                        document.frm.result_text.value="";
                        document.frm.egfr1.value="";
                        document.frm.egfr2.value="";
                        document.frm.serum.value="";
                        document.frm.result.value="";
                                deactiveResultStyle();
                        showModal("Sorry! Not a valid range");
 
                   document.getElementById('age').blur();
                    document.getElementById('serum').blur();
                        document.getElementById('weight').blur();
                        
                 
                        
                        ty=1;
                    }
                    }
                    else
                    {
                        if(serum <40)
                        {
                            document.frm.result_text.value="";
                            document.frm.egfr1.value="";
                            document.frm.egfr2.value="";
                                 document.frm.serum.value="";
                            document.frm.result.value="";
                                deactiveResultStyle();
                            showModal("Sorry! Not a valid range");
                            
                            document.getElementById('age').blur();
                            document.getElementById('serum').blur();
                            document.getElementById('weight').blur();
                            ty=1;
                        }
                        
                    }
                    }
                }
        
                function abc(bbc)
                {
                    if(ty==1)
                    {
                    bbc.blur();
                        ty=0;
                        document.frm.weight.blur();
                        
                    }
                }
                
				
                function valcal()
                {
				
				var value1 = document.getElementById("serum").value;
				
				var value2 = document.getElementById("age").value;
				
				var value3 = document.getElementById("weight").value;
				
				
				var value4 = 0, value5 = 0;
				
				if(document.getElementById("Afroamerikaner_n").checked == true || document.getElementById("Afroamerikaner_y").checked == true)
				{
				
					value4 = 1;
					
				}
				else 
				{
			
				value4 = 0;
				}
			if(document.getElementById("Mann").checked || document.getElementById("Frau").checked)
			{
					value5 = 1;
			}
			else 
			{
			value5 = 0;
			}
			if(value1 != 0 && value2 !=0 && value3 !=0 && value4 != 0 && value5 != 0)
			{
					activeResultStyle();
				
			}
			else
			{
			deactiveResultStyle();
			}
			
                    var serum = parseFloat(document.frm.serum.value);
                    
                    
                    var age = parseFloat(document.frm.age.value);
                    var weight = parseFloat(document.frm.weight.value);
                  //  alert(weight);
                    
                    var gender = 0 ;
                    var afro = 0;
                    
                    var eGFR1;
                    var eGFR2;
                     var drop=document.getElementById("drop").value;
                    if(drop==2)
                    {
                        serum=serum/88.4;
                    }
                    
                    if(document.getElementById("Mann").checked==true)
                    {
                        gender=1;
                        
                    }
                    
                    if(document.getElementById("Frau").checked==true)
                    {
                        gender=2;
                        
                    }
                    
                    if(document.getElementById("Afroamerikaner_y").checked==true)
                    {
                        afro=1;
                        
                    }
                    
                    if(document.getElementById("Afroamerikaner_n").checked==true)
                    {
                        afro=2;
                        
                    }
                    
                    //man afro
                    if((gender==1) && (afro==1))
                    {
                        eGFR1=((140 - age) * weight) /( 72 * serum);
                        eGFR2=	(186 * (Math.pow(serum, -1.154))) * ((Math.pow(age, -0.203)) * 1.212);
                        
                    }
                    //man noafro
                   else  if((gender==1)&&(afro==2))
                    {
                        eGFR1=((140 - age) * weight) /( 72 * serum);
                        eGFR2=(186 * (Math.pow(serum, -1.154))) * (Math.pow(age, -0.203));
                        
                    }
                    //female afro
                  else  if((gender==2)&&(afro==1))
                    {
                        eGFR1=(((140 - age) * weight) /( 72 * serum)) * 0.85;
                        eGFR2= (186 * (Math.pow(serum, -1.154))) * (Math.pow(age, -0.203)) * (0.742) * (1.212);
                        
                    }
                    //fenmale noafro
                    if((gender==2)&&(afro==2))
                    {
                        eGFR1=(((140 - age) * weight) /( 72 * serum)) * 0.85;
                        eGFR2=(186 * (Math.pow(serum, -1.154))) * (Math.pow(age, -0.203)) * (0.742);
                        
                    }
                    console.log(eGFR2);
                    
                    eGFR1= (Math.round(eGFR1 *100)) /100;
                    eGFR2= (Math.round(eGFR2 *100)) /100;
                    if(weight && gender!= 0 && afro!=0 && serum && age)
                    {
                    document.frm.egfr1.value=eGFR1;
                    document.frm.egfr2.value=eGFR2;
                    }
                    else
                    {
                        document.frm.egfr1.value="";
                        document.frm.egfr2.value="";
						document.frm.result.value="";
                    }
                    var result;
                    
                    if(eGFR1 >= 90)
                    {
                        result="No renal dysfunction";
                    }
                    else if(eGFR1 < 90  && eGFR1 >= 60)
                    {
                        result="Mild renal disease, CKD stage II";
                    }
                    else if(eGFR1 < 60 && eGFR1 >= 30)
                    {
                        result="Moderate renal failure, CKD stage III";
                    }
                    
                    else if(eGFR1 < 30 && eGFR1 >= 15)
                    {
                        result="Severe renal failure, CKD stage IV";
                    }
                    else if(eGFR1 < 15)
                    {
                        result="End stage renal disease, CKD stage V";
                    }
                    
                    if(result)
                    {
                        document.frm.result_text.value=result;
                    }
                    
                }
                
                function hidePopup()
                {
                    
                    document.getElementById("ShowMyCustomPop").style.display="none";
                    document.getElementById("ShowMyCustomPopLandscape").style.display="none";
                  
                }
                
                $(function()
                  {
                  $('label').bind('click', function(){ $(input, this).click(); return false; });
                  });

                
                
    function cssChange()
    {
    
    document.getElementById("ShowMyCustomPopLandscape").style.display="none";
    document.getElementById("ShowMyCustomPop").style.display="none";
    
    }
    
                            
                        function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    //alert(charCode);
    if (charCode==46)
    {
    return true;
    }
    else if (charCode > 31 && (charCode < 48 || charCode > 57)) 
    {
        return false;
    }
      
    return true;
}

	/*Active deactive results*/
			function activeResultStyle()
						{
						//alert("done");
						var classValue = document.getElementsByClassName("output_name_disabled");
						
						for(var i = 0; i  < classValue.length; i+1)
						{
						//alert("done");
						classValue[i].classList.add("output_name");
						classValue[i].classList.remove("output_name_disabled");
						}
						
						var outputClass = document.getElementsByClassName("output_disabled");
						for(var j = 0; j  < outputClass.length; j+1)
						{
						//alert("done");
						outputClass[j].classList.add("output");
						outputClass[j].classList.remove("output_disabled");
						}
						
						var textareaOutputClass = document.getElementsByClassName("text-area-output-disabled");
						for(var k = 0; k  <textareaOutputClass.length; k+1)
						{
						//alert("done");
						textareaOutputClass[k].classList.add("text-area-output");
						textareaOutputClass[k].classList.remove("text-area-output-disabled");
						}
						
						var unitOutputClass = document.getElementsByClassName("unit_label_output_disabled");
						for(var l = 0; l  < unitOutputClass.length; l+1)
						{
						//alert("done");
						unitOutputClass[l].classList.add("unit_label_output");
						unitOutputClass[l].classList.remove("unit_label_output_disabled");
						}
						
						var activityOutput = document.getElementsByClassName("activity_output_disabled");
						for(var act1 = 0; act1  < activityOutput.length; act1+1)
						{
						//alert("done");
						activityOutput[act1].classList.add("activity_output");
						activityOutput[act1].classList.remove("activity_output_disabled");
						}
						
						var activityTextOutput = document.getElementsByClassName("activity-text-area-output-disabled");
						for(var act2 = 0; act2  < activityTextOutput.length; act2+1)
						{
						//alert("done");
						activityTextOutput[act2].classList.add("activity-text-area-output");
						activityTextOutput[act2].classList.remove("activity-text-area-output-disabled");
						}
						
								
						}
                        
                       function deactiveResultStyle()
						{
						//alert("done");
						var classValue = document.getElementsByClassName("output_name");
						for(var i = 0; i  < classValue.length; i+1)
						{
						//alert("done");
						classValue[i].classList.add("output_name_disabled");
						classValue[i].classList.remove("output_name");
						}
						
						var outputClass = document.getElementsByClassName("output");
						for(var j = 0; j  < outputClass.length; j+1)
						{
						//alert("done");
						outputClass[j].classList.add("output_disabled");
						outputClass[j].classList.remove("output");
						}
						
						var textareaOutputClass = document.getElementsByClassName("text-area-output");
						for(var k = 0; k  < textareaOutputClass.length; k+1)
						{
						//alert("done");
						textareaOutputClass[k].classList.add("text-area-output-disabled");
						textareaOutputClass[k].classList.remove("text-area-output");
						}
						
						var unitOutputClass = document.getElementsByClassName("unit_label_output");
						for(var l = 0; l  < unitOutputClass.length; l+1)
						{
						//alert("done");
						unitOutputClass[l].classList.add("unit_label_output_disabled");
						unitOutputClass[l].classList.remove("unit_label_output");
						}
						
						
						var activityOutput = document.getElementsByClassName("activity_output");
						for(var act1 = 0; act1  < activityOutput.length; act1+1)
						{
						//alert("done");
						activityOutput[act1].classList.add("activity_output_disabled");
						activityOutput[act1].classList.remove("activity_output");
						}
						
						var activityTextOutput = document.getElementsByClassName("activity-text-area-output");
						for(var act2 = 0; act2  < activityTextOutput.length; act2+1)
						{
						//alert("done");
						activityTextOutput[act2].classList.add("activity-text-area-output-disabled");
						activityTextOutput[act2].classList.remove("activity-text-area-output");
						}
								
						}
    </script>
    
    </head>
    
    
    <body onorientationchange="cssChange();" onload="_geturl1();">
        
        <div id="ShowMyCustomPopLandscape"  class="AnimatePopup" style="position:absolute; display: none;">
            <img src="trans_bg.png"    width="100%" style="height:550px;  " >
                
                <img src="Std_popUp.png" id="Std_popUpImage" >
                    <div  align="center" id="divPopupText"   >
                        <p style="font-size:12pt; font-weight:bold;" id="errmgs1">
                        <b>
                            </p>
                            </div>
                    <img  onclick="hidePopup()" src="okBtn.png" id="okBtnImage"></img>
                    </div>

        <form name="frm">
           
            <div class="table_container">
            <table class="input_table">
            <colgroup>
			<col width="30%">
			<col width="35%">
			<col width="35%">
			</colgroup>
			<tbody>
			<tr><td colspan="3"></td></tr>
				<tr>
                    <td  colspan="1" class="input_name">
                        Serum creatinine
                    </td>
                    <td colspan="1">
                        <input type="number" class="input" id="serum" name="serum" onFocus="abc(this);" onkeyup="valcal(); check();" onBlur="checks();"  onkeypress="return isNumber(event)">
                            </td>
                    <td>
                        <select class="drop_unit" id="drop" onChange="valchange();"onFocus="abc(this);">
                            <option value="1" selected="selected">mg/dL</option>
                            <option value="2">&mu;mol/L</option>
                        </select>
                    </td>
				</tr>
                    <td colspan="1" class="input_name">
                        Age
                    </td>
                    <td colspan="1">
                        <input type="number" class="input" id="age" name="age" onkeyup="valcal(); check();" onFocus="abc(this);"  onkeypress="return isNumber(event)">
                            </td>
                    <td>
                        years
                    </td>
				</tr>
                
				<tr>
                    <td colspan="1" class="input_name">
                        Weight
                    </td>
                    <td colspan="1">
                        <input type="number" class="input" id="weight" name="weight" onkeyup="valcal(); check();" onFocus="abc(this);"  onkeypress="return isNumber(event)">
                            </td>
                    <td>
                        kg
                    </td>
				</tr>
                <tr>

<td colspan="1" class="input_name">Gender</td>
<td colspan="1">
<input type="radio" name="gender" id="Mann" onChange="valcal()" onFocus="abc(this);" value="1">
<label for="Mann" onclick="">Male</label></td>
<td>
<input type="radio" name="gender" id="Frau" onChange="valcal()" value="2" onFocus="abc(this);"v >
<label for="Frau" onclick="">Female</label></td>
</tr>
<td colspan="1" class="input_name">African American</td>
<td colspan="1">
<input type="radio" name="Afroamerikaner" id="Afroamerikaner_n" onChange="valcal()" onFocus="abc(this);" value="2">
<label for="Afroamerikaner_n" onclick="">No</label></td>
<td>
<input type="radio" name="Afroamerikaner" id="Afroamerikaner_y" onChange="valcal()"  onFocus="abc(this);" value="1">
<label for="Afroamerikaner_y" onclick="">Yes</label></td>
</tr>
</tbody>
</table>    
<div class="table_container">
<table class="output_table">
<colgroup>
<col width="30%">
<col width="40%">
<col width="30%">
</colgroup>          
                
				<tr>
                    <td class="output_name_disabled" colspan="3">
                        eGFR <span class="text-normal">Cockcroft-Gault</span>
                    </td></tr><tr>
                    <td colspan="2"><input class="output_disabled"  id="egfr1" name="egfr1" readonly="readonly"><br/></div>
                            </td>
                    <td class="unit_label_output_disabled">mL/min
                    </td>
				</tr>
                
				<tr>
                    <td class="output_name_disabled" colspan="3">
                        eGFR <span class="text-normal">MDRD</span>
                    </td></tr><tr>
                    <td colspan="2">
                        <input type="number" class="output_disabled" id="egfr2" name="egfr2" style="padding-left:10px;" readonly="readonly">
                            </td>
                    <td class="unit_label_output_disabled">mL/min
                        
                    </td>
				</tr>
                <tr>
                    <td class="output_name_disabled" colspan="3" >
                        <textarea class="output_disabled" id="result" name="result_text" readonly="readonly"></textarea>
                    </td>                
                </tr>
                </tbody>
                </table>
            <div class="footer-div" id="998">
		    <table class="footer-button-table" width="100%">
		    <colgroup>
		    	<col width="50%">
		    	<col width="50%">
		    </colgroup>
		       <tr>
		          <td class="footer-button" colspan="2" style="width: 50%;"><button class="mfooter-button" id="resetButton" onClick="window.location.href=window.location.href">Reset</button></td>
         		   </tr>
		    </table>
    </div> 

            
        
            
            <div id="ShowMyCustomPop"  class="AnimatePopup" style="position:absolute;display: none;">
                <img src="trans_bg.png"  id="trans_bgImage"  width="100%" >
                    
                    <img src="Std_popUp.png" id="Std_popUpImage">
                        <div  align="center" id="divPopupText" >
                            <p style="font-size:12pt; font-weight:bold;" id="errmgs">
                            <b> 
                                </p>
                                </div>
                        <img src="okBtn.png" id="okBtnImage" onClick="hidePopup()" ></button>
                            </div>
        </form>
        <br/>
		   <div id="modal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <p class="modal-text" id="text">This is text of modal</p>
                <p class="modal-button" id="modalButton">OK</p>
            </div>
        </div>      
    </body>
</html>


